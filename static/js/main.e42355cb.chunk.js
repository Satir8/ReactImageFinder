(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,a,t){e.exports={App:"App_App__3CY8W",loaderBox:"App_loaderBox__1m7tR"}},12:function(e,a,t){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3m8v-",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__2i64d"}},13:function(e,a,t){e.exports={Overlay:"Modal_Overlay__2lzg0",Modal:"Modal_Modal__1pVDv"}},28:function(e,a,t){e.exports={ImageGallery:"ImageGallery_ImageGallery__2u_KM"}},29:function(e,a,t){e.exports={Button:"Button_Button__3zzvh"}},30:function(e,a,t){e.exports=t(76)},35:function(e,a,t){},5:function(e,a,t){e.exports={Searchbar:"SeartchBar_Searchbar__32Z1d",SearchForm:"SeartchBar_SearchForm__1qDD3",SearchFormButton:"SeartchBar_SearchFormButton__3D1Cq",SearchFormButtonLabel:"SeartchBar_SearchFormButtonLabel__3w45T",SearchFormInput:"SeartchBar_SearchFormInput__3n9nR"}},76:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(24),c=t.n(o),l=(t(35),t(14)),s=t(25),i=t(3),u=t.n(i),m=t(4),p=t(6),d=t(7),h=t(9),g=t(8),f=t(10),v=t(26),y=t.n(v),S=(t(58),t(11)),b=t.n(S),_=t(27),O=t.n(_),I="".concat("https://pixabay.com/api/"),M="".concat("15214102-862d46bc26ac8938e47fe48ba"),E=function(){var e=Object(m.a)(u.a.mark((function e(a,t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(I,"?q=").concat(a,"&page=").concat(t,"&key=").concat(M,"&image_type=photo&orientation=horizontal&per_page=12"));case 3:return n=e.sent,e.abrupt("return",n.data.hits);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a,t){return e.apply(this,arguments)}}(),w=t(5),C=t.n(w),k=function(e){var a=e.onSubmit,t=e.value,n=e.onChange;return r.a.createElement("header",{className:C.a.Searchbar},r.a.createElement("form",{className:C.a.SearchForm,onSubmit:function(e){return a(e)}},r.a.createElement("button",{type:"submit",className:C.a.SearchFormButton},r.a.createElement("span",{className:C.a.SearchFormButtonLabel},"Search")),r.a.createElement("input",{value:t,onChange:function(e){return n(e)},className:C.a.SearchFormInput,type:"text",name:"query",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})))},x=t(28),B=t.n(x),L=t(12),N=t.n(L),j=t(13),F=t.n(j),q=function(e){function a(){var e,t;Object(p.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(o)))).overlayRef=Object(n.createRef)(),t.handleKeyPress=function(e){"Escape"===e.code&&t.props.onCloseModal()},t.handleOverlayClick=function(e){var a=t.overlayRef.current;a&&e.target!==a||t.props.onCloseModal()},t}return Object(f.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this,a=this.props.imgUrl;return r.a.createElement("div",{ref:this.overlayRef,onClick:function(a){return e.handleOverlayClick(a)},className:F.a.Overlay},r.a.createElement("div",{className:F.a.Modal},r.a.createElement("img",{src:a,alt:"",width:"880"})))}}]),a}(n.Component),G=function(e){var a=e.item,t=e.isModalOpen,n=e.onCloseModal,o=e.onOpenModal,c=e.modalImageUrl,l=a.webformatURL,s=a.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:N.a.ImageGalleryItem},r.a.createElement("img",{src:l,alt:"",className:N.a.ImageGalleryItemImage,id:s,onClick:o}),t&&r.a.createElement(q,{imgUrl:c,onCloseModal:n})))},U=function(e){var a=e.data,t=e.onOpenModal,n=e.onCloseModal,o=a.pictures,c=a.isModalOpen,l=a.modalImageUrl;return r.a.createElement("ul",{className:B.a.ImageGallery},o.map((function(e){return r.a.createElement(G,{key:e.id,item:e,modalImageUrl:l,isModalOpen:c,onOpenModal:t,onCloseModal:n})})))},D=t(29),J=t.n(D),R=function(e){var a=e.onLoadMore;return r.a.createElement("button",{className:J.a.Button,onClick:a},"Load More")},A=function(e){function a(){var e,t;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={pictures:[],query:"",page:1,isLoading:!1,isModalOpen:!1,modalImageUrl:""},t.handleOpenModal=function(e){var a=Number(e.target.id);t.setState((function(e){return{isModalOpen:!0,modalImageUrl:e.pictures.filter((function(e){return e.id===a}))[0].largeImageURL}}))},t.handleCloseModal=function(e){t.setState({isModalOpen:!1})},t.handleSubmit=function(){var e=Object(m.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.target.elements[1],e.prev=2,t.setState({isLoading:!0}),e.next=6,E(n.value,1);case 6:r=e.sent,t.setState({pictures:r,query:n.value,page:1,isLoading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),t.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(a){return e.apply(this,arguments)}}(),t.handleChange=function(e){t.setState(Object(s.a)({},e.target.name,e.target.value))},t.handleLoadMore=Object(m.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.query,e.prev=1,t.setState({isLoading:!0}),e.next=5,E(a,t.state.page+1);case 5:n=e.sent,t.setState((function(e){return{pictures:[].concat(Object(l.a)(e.pictures),Object(l.a)(n)),query:t.state.query,page:e.page+1,isLoading:!1}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),t}return Object(f.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark((function e(){var a,t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=localStorage.getItem("pictures"),t=localStorage.getItem("query"),n=localStorage.getItem("page"),a&&this.setState({pictures:JSON.parse(a),query:JSON.parse(t),page:JSON.parse(n)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,a){var t=this.state,n=t.pictures,r=t.query,o=t.page;a!==this.state&&(localStorage.setItem("pictures",JSON.stringify(n)),localStorage.setItem("query",JSON.stringify(r)),localStorage.setItem("page",JSON.stringify(o)))}},{key:"render",value:function(){var e=this.state,a=e.pictures,t=e.query,n=e.isLoading;return r.a.createElement("div",{className:b.a.App},r.a.createElement(k,{onChange:this.handleChange,value:t,onSubmit:this.handleSubmit}),a.length>0&&r.a.createElement(U,{data:this.state,onOpenModal:this.handleOpenModal,onCloseModal:this.handleCloseModal}),n?r.a.createElement("div",{className:b.a.loaderBox},r.a.createElement(y.a,{type:"BallTriangle",color:"#ffc400",height:90,width:90})):a.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{onLoadMore:this.handleLoadMore})))}}]),a}(n.Component);c.a.render(r.a.createElement(A,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.e42355cb.chunk.js.map