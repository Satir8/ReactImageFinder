{"version":3,"sources":["components/App.module.css","components/imageGallery/imageGalleryItem/ImageGalleryItem.module.css","components/imageGallery/imageGalleryItem/modal/Modal.module.css","components/imageGallery/ImageGallery.module.css","components/button/Button.module.css","components/seartchBar/SeartchBar.module.css","components/fetcher.js","components/seartchBar/SeartchBar.js","components/imageGallery/imageGalleryItem/modal/Modal.js","components/imageGallery/imageGalleryItem/ImageGalleryItem.js","components/imageGallery/ImageGallery.js","components/button/Button.js","components/App.js","index.js"],"names":["module","exports","BASE_URL","process","PRIVATE_KEY","fetcher","param","page","a","axios","get","data","hits","console","log","SeartchBar","onSubmit","value","onChange","className","styles","Searchbar","SearchForm","e","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","name","autoComplete","autoFocus","placeholder","Modal","overlayRef","createRef","handleKeyPress","code","props","onCloseModal","handleOverlayClick","current","target","window","addEventListener","this","removeEventListener","imgUrl","ref","onClick","Overlay","src","alt","width","Component","ImageGalleryItem","item","isModalOpen","onOpenModal","modalImageUrl","webformatURL","id","ImageGalleryItemImage","ImageGallery","pictures","map","key","Button","onLoadMore","App","state","query","isLoading","handleOpenModal","imgId","Number","setState","prev","filter","largeImageURL","handleCloseModal","handleSubmit","preventDefault","input","elements","handleChange","handleLoadMore","prevState","scrollTo","top","document","documentElement","scrollHeight","behavior","persistedPictures","localStorage","getItem","persistedQuery","persistedPage","JSON","parse","prevProps","setItem","stringify","length","loaderBox","color","height","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.e42355cb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3CY8W\",\"loaderBox\":\"App_loaderBox__1m7tR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3m8v-\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2i64d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2lzg0\",\"Modal\":\"Modal_Modal__1pVDv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2u_KM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3zzvh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SeartchBar_Searchbar__32Z1d\",\"SearchForm\":\"SeartchBar_SearchForm__1qDD3\",\"SearchFormButton\":\"SeartchBar_SearchFormButton__3D1Cq\",\"SearchFormButtonLabel\":\"SeartchBar_SearchFormButtonLabel__3w45T\",\"SearchFormInput\":\"SeartchBar_SearchFormInput__3n9nR\"};","import axios from \"axios\";\r\n\r\n// FETCHER\r\nconst BASE_URL = `${process.env.REACT_APP_DEFAULT_URL}`;\r\nconst PRIVATE_KEY = `${process.env.REACT_APP_PRIVATE_KEY}`;\r\n\r\nexport const fetcher = async (param, page) => {\r\n  try {\r\n    const data = await axios.get(\r\n      `${BASE_URL}?q=${param}&page=${page}&key=${PRIVATE_KEY}&image_type=photo&orientation=horizontal&per_page=12`\r\n    );\r\n    return data.data.hits;\r\n  } catch (er) {\r\n    console.log(er);\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./SeartchBar.module.css\";\r\n\r\nconst SeartchBar = ({ onSubmit, value, onChange }) => (\r\n  <header className={styles.Searchbar}>\r\n    <form className={styles.SearchForm} onSubmit={e => onSubmit(e)}>\r\n      <button type=\"submit\" className={styles.SearchFormButton}>\r\n        <span className={styles.SearchFormButtonLabel}>Search</span>\r\n      </button>\r\n\r\n      <input\r\n        value={value}\r\n        onChange={e => onChange(e)}\r\n        className={styles.SearchFormInput}\r\n        type=\"text\"\r\n        name=\"query\"\r\n        autoComplete=\"off\"\r\n        autoFocus\r\n        placeholder=\"Search images and photos\"\r\n      />\r\n    </form>\r\n  </header>\r\n);\r\n\r\nexport default SeartchBar;\r\n","import React, { Component, createRef } from \"react\";\r\nimport styles from \"./Modal.module.css\";\r\n\r\nclass Modal extends Component {\r\n  overlayRef = createRef();\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyPress);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyPress);\r\n  }\r\n\r\n  handleKeyPress = e => {\r\n    if (e.code !== \"Escape\") return;\r\n    this.props.onCloseModal();\r\n  };\r\n\r\n  handleOverlayClick = e => {\r\n    const { current } = this.overlayRef;\r\n    if (current && e.target !== current) return;\r\n    this.props.onCloseModal();\r\n  };\r\n\r\n  render() {\r\n    const { imgUrl } = this.props;\r\n    return (\r\n      <div\r\n        ref={this.overlayRef}\r\n        onClick={e => this.handleOverlayClick(e)}\r\n        className={styles.Overlay}\r\n      >\r\n        <div className={styles.Modal}>\r\n          <img src={imgUrl} alt=\"\" width=\"880\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React from \"react\";\r\nimport styles from \"./ImageGalleryItem.module.css\";\r\nimport Modal from \"./modal/Modal\";\r\n\r\nconst ImageGalleryItem = ({\r\n  item,\r\n  isModalOpen,\r\n  onCloseModal,\r\n  onOpenModal,\r\n  modalImageUrl\r\n}) => {\r\n  const { webformatURL, id } = item;\r\n\r\n  return (\r\n    <>\r\n      <li className={styles.ImageGalleryItem}>\r\n        <img\r\n          src={webformatURL}\r\n          alt=\"\"\r\n          className={styles.ImageGalleryItemImage}\r\n          id={id}\r\n          onClick={onOpenModal}\r\n        />\r\n        {isModalOpen && (\r\n          <Modal imgUrl={modalImageUrl} onCloseModal={onCloseModal} />\r\n        )}\r\n      </li>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport styles from \"./ImageGallery.module.css\";\r\nimport ImageGalleryItem from \"./imageGalleryItem/ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ data, onOpenModal, onCloseModal }) => {\r\n  const { pictures, isModalOpen, modalImageUrl } = data;\r\n  return (\r\n    <ul className={styles.ImageGallery}>\r\n      {pictures.map(item => {\r\n        return (\r\n          <ImageGalleryItem\r\n            key={item.id}\r\n            item={item}\r\n            modalImageUrl={modalImageUrl}\r\n            isModalOpen={isModalOpen}\r\n            onOpenModal={onOpenModal}\r\n            onCloseModal={onCloseModal}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React from \"react\";\r\nimport styles from \"./Button.module.css\";\r\n\r\nconst Button = ({ onLoadMore }) => (\r\n  <button className={styles.Button} onClick={onLoadMore}>\r\n    Load More\r\n  </button>\r\n);\r\n\r\nexport default Button;\r\n","import React, { Component } from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport styles from \"./App.module.css\";\nimport { fetcher } from \"./fetcher\";\nimport SeartchBar from \"./seartchBar/SeartchBar\";\nimport ImageGallery from \"./imageGallery/ImageGallery\";\nimport Button from \"./button/Button\";\n\nclass App extends Component {\n  state = {\n    pictures: [],\n    query: \"\",\n    page: 1,\n    isLoading: false,\n    isModalOpen: false,\n    modalImageUrl: \"\"\n  };\n\n  handleOpenModal = e => {\n    const imgId = Number(e.target.id);\n    this.setState(prev => {\n      const targetImg = prev.pictures.filter(item => item.id === imgId);\n      return {\n        isModalOpen: true,\n        modalImageUrl: targetImg[0].largeImageURL\n      };\n    });\n  };\n\n  handleCloseModal = e => {\n    this.setState({ isModalOpen: false });\n  };\n\n  async componentDidMount() {\n    const persistedPictures = localStorage.getItem(\"pictures\");\n    const persistedQuery = localStorage.getItem(\"query\");\n    const persistedPage = localStorage.getItem(\"page\");\n    if (persistedPictures) {\n      this.setState({\n        pictures: JSON.parse(persistedPictures),\n        query: JSON.parse(persistedQuery),\n        page: JSON.parse(persistedPage)\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { pictures, query, page } = this.state;\n    if (prevState !== this.state) {\n      localStorage.setItem(\"pictures\", JSON.stringify(pictures));\n      localStorage.setItem(\"query\", JSON.stringify(query));\n      localStorage.setItem(\"page\", JSON.stringify(page));\n    }\n  }\n\n  handleSubmit = async e => {\n    e.preventDefault();\n    const input = e.target.elements[1];\n\n    try {\n      this.setState({ isLoading: true });\n      const data = await fetcher(input.value, 1);\n      this.setState({\n        pictures: data,\n        query: input.value,\n        page: 1,\n        isLoading: false\n      });\n    } catch (er) {\n      console.log(er);\n      this.setState({ isLoading: false });\n    }\n  };\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleLoadMore = async () => {\n    const { query } = this.state;\n    try {\n      this.setState({ isLoading: true });\n      const data = await fetcher(query, this.state.page + 1);\n      this.setState(prevState => ({\n        pictures: [...prevState.pictures, ...data],\n        query: this.state.query,\n        page: prevState.page + 1,\n        isLoading: false\n      }));\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: \"smooth\"\n      });\n    } catch (er) {\n      console.log(er);\n      this.setState({ isLoading: false });\n    }\n  };\n\n  render() {\n    const { pictures, query, isLoading } = this.state;\n    return (\n      <div className={styles.App}>\n        <SeartchBar\n          onChange={this.handleChange}\n          value={query}\n          onSubmit={this.handleSubmit}\n        />\n        {pictures.length > 0 && (\n          <ImageGallery\n            data={this.state}\n            onOpenModal={this.handleOpenModal}\n            onCloseModal={this.handleCloseModal}\n          />\n        )}\n\n        {isLoading ? (\n          <div className={styles.loaderBox}>\n            <Loader\n              type=\"BallTriangle\"\n              color=\"#ffc400\"\n              height={90}\n              width={90}\n            />\n          </div>\n        ) : (\n          pictures.length > 0 && (\n            <>\n              <Button onLoadMore={this.handleLoadMore} />\n            </>\n          )\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}